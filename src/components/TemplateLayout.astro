---
import Container from "@/components/container.astro";
import TemplateVariants from "@/components/TemplateVariants.astro";
import EditableTemplate from "@/components/EditableTemplate.astro";

interface Example {
  title: string;
  description: string;
}

interface HowToItem {
  title: string;
  description: string;
}

interface FAQ {
  question: string;
  answer: string;
}

interface Props {
  h1: string;
  subtitle: string;
  examples: Example[];
  howToWrite: HowToItem[];
  faq: FAQ[];
  currentPath: string;
  variant: string;
}

const { h1, subtitle, examples, howToWrite, faq, currentPath, variant } = Astro.props;
---

<Container>
  <!-- 头部标题区域 -->
  <section class="text-center py-12 md:py-16">
    <h1 class="text-3xl lg:text-4xl xl:text-5xl font-bold lg:tracking-tight xl:tracking-tighter">
      {h1}
    </h1>
    <p class="text-lg mt-4 text-slate-600 max-w-3xl mx-auto">
      {subtitle}
    </p>
  </section>

  <!-- 模板变体切换器 -->
  <TemplateVariants currentPath={currentPath} />

  <!-- 可编辑的SMART Goal模板（包含导出按钮） -->
  <EditableTemplate />

  <!-- 模板预览图片展示 -->
  <section class="my-16">
    <h2 class="text-3xl font-bold mb-8 text-center">SMART Goals Template Preview</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
      <div class="flex flex-col items-center gap-4">
        <div class="w-full template-preview-item" style="aspect-ratio: 1 / 1.414;">
          <img
            src="/template/smart-goals-template-preview-1.webp"
            alt="SMART Goals Template Example - Printable Worksheet with Specific, Measurable, Achievable, Relevant, and Time-bound sections"
            class="w-full h-full object-cover rounded-lg shadow-lg border border-slate-200"
            loading="lazy"
          />
        </div>
        <a
          href="/template/smart-goals-template-preview-1.webp"
          download="smart-goals-template-1.webp"
          class="inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-md hover:bg-gray-800 transition-all font-medium text-sm border border-black hover:border-gray-800"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download Template
        </a>
      </div>
      <div class="flex flex-col items-center gap-4">
        <div class="w-full template-preview-item" style="aspect-ratio: 1 / 1.414;">
          <img
            src="/template/smart-goals-template-preview-2.webp"
            alt="Free SMART Goal Setting Template - Career and Personal Development Planning Tool"
            class="w-full h-full object-cover rounded-lg shadow-lg border border-slate-200"
            loading="lazy"
          />
        </div>
        <a
          href="/template/smart-goals-template-preview-2.webp"
          download="smart-goals-template-2.webp"
          class="inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-md hover:bg-gray-800 transition-all font-medium text-sm border border-black hover:border-gray-800"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download Template
        </a>
      </div>
      <div class="flex flex-col items-center gap-4">
        <div class="w-full template-preview-item" style="aspect-ratio: 1 / 1.414;">
          <img
            src="/template/smart-goals-template-preview-3.webp"
            alt="SMART Goals Worksheet - Downloadable Goal Planning Template for Work and Students"
            class="w-full h-full object-cover rounded-lg shadow-lg border border-slate-200"
            loading="lazy"
          />
        </div>
        <a
          href="/template/smart-goals-template-preview-3.webp"
          download="smart-goals-template-3.webp"
          class="inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-md hover:bg-gray-800 transition-all font-medium text-sm border border-black hover:border-gray-800"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download Template
        </a>
      </div>
    </div>
  </section>

  <style>
    .template-preview-item {
      display: block;
      overflow: hidden;
      border-radius: 0.5rem;
    }

    .template-preview-item img {
      transition: transform 0.3s ease;
    }

    .template-preview-item:hover img {
      transform: scale(1.05);
    }
  </style>

  <!-- 示例区域 -->
  <section class="my-16 bg-slate-50 rounded-lg p-6 md:p-12">
    <h2 class="text-3xl font-bold mb-8">Examples of SMART Goals</h2>

    <div class="space-y-8">
      {examples.map((example) => (
        <div class="bg-white p-6 rounded-lg border-l-4 border-slate-800">
          <h3 class="font-bold text-xl mb-3 text-slate-800">{example.title}</h3>
          <p class="text-slate-700">{example.description}</p>
        </div>
      ))}
    </div>
  </section>

  <!-- 如何编写 SMART Goals -->
  <section class="my-16">
    <h2 class="text-3xl font-bold mb-8 text-center">How to Write SMART Goals</h2>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {howToWrite.map((item) => (
        <div class="bg-slate-50 border border-slate-200 p-6 rounded-lg hover:shadow-md transition-shadow">
          <h3 class="font-bold text-xl mb-3 text-slate-800">{item.title}</h3>
          <p class="text-slate-700">{item.description}</p>
        </div>
      ))}
    </div>
  </section>

  <!-- FAQ 区域 -->
  <section class="my-16">
    <h2 class="text-3xl font-bold mb-8 text-center">FAQ</h2>

    <div class="space-y-6 max-w-3xl mx-auto">
      {faq.map((item) => (
        <div class="border-b border-slate-200 pb-6">
          <h3 class="font-bold text-lg mb-2">{item.question}</h3>
          <p class="text-slate-600">{item.answer}</p>
        </div>
      ))}
    </div>
  </section>
</Container>

<!-- FAQPage 结构化数据 -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faq.map(item => ({
    "@type": "Question",
    "name": item.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": item.answer
    }
  }))
})} />

<!-- HowTo 结构化数据 -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": `How to Write ${h1}`,
  "description": subtitle,
  "step": howToWrite.map((step, index) => ({
    "@type": "HowToStep",
    "position": index + 1,
    "name": step.title,
    "text": step.description
  }))
})} />
