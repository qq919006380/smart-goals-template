---
import Container from "@/components/container.astro";
import TemplateVariants from "@/components/TemplateVariants.astro";
import EditableTemplate from "@/components/EditableTemplate.astro";

interface Example {
  title: string;
  description: string;
}

interface HowToItem {
  title: string;
  description: string;
}

interface FAQ {
  question: string;
  answer: string;
}

interface Props {
  h1: string;
  subtitle: string;
  examples: Example[];
  howToWrite: HowToItem[];
  faq: FAQ[];
  currentPath: string;
  variant: string;
}

const { h1, subtitle, examples, howToWrite, faq, currentPath, variant } = Astro.props;
---

<Container>
  <!-- 头部标题区域 -->
  <section class="text-center py-12 md:py-16">
    <h1 class="text-3xl lg:text-4xl xl:text-5xl font-bold lg:tracking-tight xl:tracking-tighter">
      {h1}
    </h1>
    <p class="text-lg mt-4 text-slate-600 max-w-3xl mx-auto">
      {subtitle}
    </p>
  </section>

  <!-- 模板变体切换器 -->
  <TemplateVariants currentPath={currentPath} />

  <!-- 可编辑的SMART Goal模板（包含导出按钮） -->
  <EditableTemplate />

  <!-- Google Docs 文档预览区域 -->
  <section class="my-16">
    <h2 class="text-3xl font-bold mb-8 text-center">SMART Goals Examples & Resources</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Sample Personal SMART Goals -->
      <a
        href="https://docs.google.com/document/d/14963lsPSfRRrIUbcOrncY8DvShdQtf6WfIaNU3NDZ2U/preview"
        target="_blank"
        class="docs-card group"
      >
        <div class="docs-preview">
          <iframe
            src="https://docs.google.com/document/d/14963lsPSfRRrIUbcOrncY8DvShdQtf6WfIaNU3NDZ2U/preview"
            title="Sample Personal SMART Goals"
            loading="lazy"
            class="pointer-events-none"
          ></iframe>
          <div class="docs-overlay">
            <span class="view-text">View Document</span>
          </div>
        </div>
        <h3 class="docs-title">Sample Personal SMART Goals</h3>
      </a>

      <!-- SMART Goals for Employees -->
      <a
        href="https://docs.google.com/document/d/1P7lCnj8Kzv1CXYKuqYe5vkcDWG-KKKe_5NcVXeJoUl8/preview"
        target="_blank"
        class="docs-card group"
      >
        <div class="docs-preview">
          <iframe
            src="https://docs.google.com/document/d/1P7lCnj8Kzv1CXYKuqYe5vkcDWG-KKKe_5NcVXeJoUl8/preview"
            title="SMART Goals for Employees"
            loading="lazy"
            class="pointer-events-none"
          ></iframe>
          <div class="docs-overlay">
            <span class="view-text">View Document</span>
          </div>
        </div>
        <h3 class="docs-title">SMART Goals for Students</h3>
      </a>

      <!-- SMART Goals for Students -->
      <a
        href="https://docs.google.com/document/d/1wVQfCJgmWsRGfzx-n7oVcy3nelrQxfiVUkLo9OaxPso/preview"
        target="_blank"
        class="docs-card group"
      >
        <div class="docs-preview">
          <iframe
            src="https://docs.google.com/document/d/1wVQfCJgmWsRGfzx-n7oVcy3nelrQxfiVUkLo9OaxPso/preview"
            title="SMART Goals for Students"
            loading="lazy"
            class="pointer-events-none"
          ></iframe>
          <div class="docs-overlay">
            <span class="view-text">View Document</span>
          </div>
        </div>
        <h3 class="docs-title">SMART Goals for Employees</h3>
      </a>

      <!-- Time-bound Goals -->
      <a
        href="https://docs.google.com/document/d/1BflRJBOnztdlLYpyXTDz8v_gr1TjjThNGzWF9q82_rU/preview"
        target="_blank"
        class="docs-card group"
      >
        <div class="docs-preview">
          <iframe
            src="https://docs.google.com/document/d/1BflRJBOnztdlLYpyXTDz8v_gr1TjjThNGzWF9q82_rU/preview"
            title="Time-bound Goals"
            loading="lazy"
            class="pointer-events-none"
          ></iframe>
          <div class="docs-overlay">
            <span class="view-text">View Document</span>
          </div>
        </div>
        <h3 class="docs-title">Time-bound Goals</h3>
      </a>

      <!-- SMART Goals Worksheet -->
      <a
        href="https://docs.google.com/document/d/1XDcndfnlEN3egPyDWbDAKaqexcFSvOQburwDwKszfOM/preview"
        target="_blank"
        class="docs-card group"
      >
        <div class="docs-preview">
          <iframe
            src="https://docs.google.com/document/d/1XDcndfnlEN3egPyDWbDAKaqexcFSvOQburwDwKszfOM/preview"
            title="SMART Goals Worksheet"
            loading="lazy"
            class="pointer-events-none"
          ></iframe>
          <div class="docs-overlay">
            <span class="view-text">View Document</span>
          </div>
        </div>
        <h3 class="docs-title">SMART Goals Worksheet</h3>
      </a>

      <!-- Sample Smart Goal -->
      <a
        href="https://docs.google.com/document/d/13EIN6QO-L1jPtTJ0FSSmkcL5-jbvzfQctMDd-W--CPk/preview"
        target="_blank"
        class="docs-card group"
      >
        <div class="docs-preview">
          <iframe
            src="https://docs.google.com/document/d/13EIN6QO-L1jPtTJ0FSSmkcL5-jbvzfQctMDd-W--CPk/preview"
            title="Sample Smart Goal"
            loading="lazy"
            class="pointer-events-none"
          ></iframe>
          <div class="docs-overlay">
            <span class="view-text">View Document</span>
          </div>
        </div>
        <h3 class="docs-title">Sample Smart Goal</h3>
      </a>
    </div>
  </section>

  <!-- 模板预览图片展示 -->
  <section class="my-16">
    <h2 class="text-3xl font-bold mb-8 text-center">SMART Goals Template Preview</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto">
      <div class="flex flex-col items-center gap-4">
        <div class="w-full template-preview-item" style="aspect-ratio: 1 / 1.414;">
          <img
            src="/template/smart-goals-template-preview-1.webp"
            alt="SMART Goals Template Example - Printable Worksheet with Specific, Measurable, Achievable, Relevant, and Time-bound sections"
            class="w-full h-full object-cover rounded-lg shadow-lg border border-slate-200"
            loading="lazy"
          />
        </div>
        <a
          href="/template/smart-goals-template-preview-1.webp"
          download="smart-goals-template-1.webp"
          class="inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-md hover:bg-gray-800 transition-all font-medium text-sm border border-black hover:border-gray-800"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download Template
        </a>
      </div>
      <div class="flex flex-col items-center gap-4">
        <div class="w-full template-preview-item" style="aspect-ratio: 1 / 1.414;">
          <img
            src="/template/smart-goals-template-preview-2.webp"
            alt="Free SMART Goal Setting Template - Career and Personal Development Planning Tool"
            class="w-full h-full object-cover rounded-lg shadow-lg border border-slate-200"
            loading="lazy"
          />
        </div>
        <a
          href="/template/smart-goals-template-preview-2.webp"
          download="smart-goals-template-2.webp"
          class="inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-md hover:bg-gray-800 transition-all font-medium text-sm border border-black hover:border-gray-800"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download Template
        </a>
      </div>
      <div class="flex flex-col items-center gap-4">
        <div class="w-full template-preview-item" style="aspect-ratio: 1 / 1.414;">
          <img
            src="/template/smart-goals-template-preview-3.webp"
            alt="SMART Goals Worksheet - Downloadable Goal Planning Template for Work and Students"
            class="w-full h-full object-cover rounded-lg shadow-lg border border-slate-200"
            loading="lazy"
          />
        </div>
        <a
          href="/template/smart-goals-template-preview-3.webp"
          download="smart-goals-template-3.webp"
          class="inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-md hover:bg-gray-800 transition-all font-medium text-sm border border-black hover:border-gray-800"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download Template
        </a>
      </div>
      <div class="flex flex-col items-center gap-4">
        <div class="w-full template-preview-item" style="aspect-ratio: 1 / 1.414;">
          <img
            src="/template/smart-goals-template-preview-4.webp"
            alt="SMART Goals Framework Template - Make Your Goals SMART with Specific Measurable Achievable Relevant Timely sections"
            class="w-full h-full object-cover rounded-lg shadow-lg border border-slate-200"
            loading="lazy"
          />
        </div>
        <a
          href="/template/smart-goals-template-preview-4.webp"
          download="smart-goals-template-4.webp"
          class="inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-md hover:bg-gray-800 transition-all font-medium text-sm border border-black hover:border-gray-800"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download Template
        </a>
      </div>
    </div>
  </section>

  <style>
    /* Google Docs 卡片样式 */
    .docs-card {
      display: flex;
      flex-direction: column;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      text-decoration: none;
      color: inherit;
    }

    .docs-card:hover {
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      transform: translateY(-4px);
    }

    .docs-preview {
      position: relative;
      width: 100%;
      aspect-ratio: 1 / 1.414; /* A4 比例 */
      background: #f5f5f5;
      overflow: hidden;
    }

    .docs-preview iframe {
      width: 200%;
      height: 200%;
      border: none;
      transform: scale(0.5);
      transform-origin: top left;
      pointer-events: none;
    }

    .docs-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    }

    .docs-card:hover .docs-overlay {
      background: rgba(0, 0, 0, 0.6);
    }

    .view-text {
      color: white;
      font-weight: 600;
      font-size: 1rem;
      opacity: 0;
      transform: scale(0.9);
      transition: all 0.3s ease;
    }

    .docs-card:hover .view-text {
      opacity: 1;
      transform: scale(1);
    }

    .docs-title {
      padding: 1rem;
      font-weight: 600;
      font-size: 0.9rem;
      color: #333;
      text-align: center;
      border-top: 1px solid #e5e5e5;
    }

    /* 响应式调整 */
    @media (max-width: 1024px) {
      .docs-preview {
        aspect-ratio: 1 / 1.414;
      }
    }

    @media (max-width: 768px) {
      .docs-card {
        max-width: 400px;
        margin: 0 auto;
      }
    }

    /* 模板预览样式 */
    .template-preview-item {
      display: block;
      overflow: hidden;
      border-radius: 0.5rem;
    }

    .template-preview-item img {
      transition: transform 0.3s ease;
    }

    .template-preview-item:hover img {
      transform: scale(1.05);
    }
  </style>

  <!-- 示例区域 -->
  <section class="my-16 bg-slate-50 rounded-lg p-6 md:p-12">
    <h2 class="text-3xl font-bold mb-8">Examples of SMART Goals</h2>

    <div class="space-y-8">
      {examples.map((example) => (
        <div class="bg-white p-6 rounded-lg border-l-4 border-slate-800">
          <h3 class="font-bold text-xl mb-3 text-slate-800">{example.title}</h3>
          <p class="text-slate-700">{example.description}</p>
        </div>
      ))}
    </div>
  </section>

  <!-- 如何编写 SMART Goals -->
  <section class="my-16">
    <h2 class="text-3xl font-bold mb-8 text-center">How to Write SMART Goals</h2>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {howToWrite.map((item) => (
        <div class="bg-slate-50 border border-slate-200 p-6 rounded-lg hover:shadow-md transition-shadow">
          <h3 class="font-bold text-xl mb-3 text-slate-800">{item.title}</h3>
          <p class="text-slate-700">{item.description}</p>
        </div>
      ))}
    </div>
  </section>

  <!-- FAQ 区域 -->
  <section class="my-16">
    <h2 class="text-3xl font-bold mb-8 text-center">FAQ</h2>

    <div class="space-y-6 max-w-3xl mx-auto">
      {faq.map((item) => (
        <div class="border-b border-slate-200 pb-6">
          <h3 class="font-bold text-lg mb-2">{item.question}</h3>
          <p class="text-slate-600">{item.answer}</p>
        </div>
      ))}
    </div>
  </section>
</Container>

<!-- FAQPage 结构化数据 -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faq.map(item => ({
    "@type": "Question",
    "name": item.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": item.answer
    }
  }))
})} />

<!-- HowTo 结构化数据 -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": `How to Write ${h1}`,
  "description": subtitle,
  "step": howToWrite.map((step, index) => ({
    "@type": "HowToStep",
    "position": index + 1,
    "name": step.title,
    "text": step.description
  }))
})} />
